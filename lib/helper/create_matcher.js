(function(global,factory){if('function'==typeof define&&define.amd)define(['module','exports','immutable','moment'],factory);else if('undefined'!=typeof exports)factory(module,exports,require('immutable'),require('moment'));else{var mod={exports:{}};factory(mod,mod.exports,global.immutable,global.moment),global.create_matcher=mod.exports}})(this,function(module,exports,_immutable,_moment){'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _moment2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_moment),_typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj},convertExpected=function(expected){var type='undefined'==typeof expected?'undefined':_typeof(expected);return'string'===type||'number'===type?expected:expect.mock?'spy called':((_immutable.Map.isMap(expected)||_immutable.List.isList(expected))&&(expected=expected.toJS()),_moment2.default.isMoment(expected)?expected.toJSON():JSON.stringify(expected))},CreateMsg=function(msg){return function(actual,expected,attrs){return function(){return msg.match(/:expected/)&&(msg=msg.replace(/:expected/,convertExpected(expected))),msg.match(/:actual/)&&(msg=msg.replace(/:actual/,convertExpected(actual))),msg.match(/:attrs/)&&(msg=msg.replace(/:attrs/,convertExpected(attrs.join(' ')))),msg}}};exports.default=function(check,_ref){var succ=_ref.succ,fail=_ref.fail,failMsg=CreateMsg(fail),succMsg=CreateMsg(succ);return function(actual,expected){for(var _len=arguments.length,attrs=Array(2<_len?_len-2:0),_key=2;_key<_len;_key++)attrs[_key-2]=arguments[_key];void 0===expected&&(expected='');var result={};return result.pass=check(actual,expected,attrs),result.message=result.pass?succMsg(actual,expected,attrs):failMsg(actual,expected,attrs),result}},module.exports=exports['default']});